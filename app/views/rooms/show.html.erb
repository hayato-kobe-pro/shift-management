<% i = 0 %>
<div class="container" >
<p id="notice"><%= notice %></p>



<p>
  <strong style=" padding: 0.25em 0.5em;/*上下 左右の余白*/
  color: #494949;/*文字色*/
  background: transparent;/*背景透明に*/
  border-left: solid 5px #7db4e6;/*左線*/ ">教室 : <%= @room.name %></strong>
 
</p>
<div style="text-align:center;">
<%# ２つ目のテーブル %>
<div class="row">

<table border="1" align="left" class="col-3" style="word-break: break-word;">
<tr >
<td>　</td>
</tr>
<tr>
<td>名前</td>
</tr>

<% @names.each do |name| %>
<tr>
<td style="height:40.5px;"><%= name %></td>
</tr>
<% end %>

</table>
<% (1..3).each do |n| %>
<table border="1" class="col-3">
  <tr>
     <td colspan="3"><%= (@date[n - 1].month ) %>/<%= (@date[n -1 ].day ) %></td>
  </tr>      
  <tr>
      <td>長</td><td>低</td><td>高</td>
  </tr>    
  <% @names.each do |name| %>
  <tr>
 <% (1..3).each do |n| %>
  <% date = Date.today - (Date.today.wday - (1 + i)) %>
      <td><button type="button" class="btn btn-light w-100" data-toggle="modal" data-target="#exampleModal" onclick="open_dialog('<%= date %>')">
      <% flg = 0%>
      <% @schedules.each  do |schedule|%>
      <% if schedule.name == name && schedule.start_time.include?("#{date} #{16 + n}") %>
        ◯
      <% flg = 1%>
      <% end %>
      <%end%>
      <% if flg == 0 %>
      　
      <%end%>
      </button></td>
<% end %>
  </tr>

  
  <% end %>
  <% i+=2 %>
  
</table>
<% end %>
<div>

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
      <div id="date-break" >
          <h5></h5>
      </div>
        <button type="button" class="btn btn-danger" onclick="remove_shift()">削除</button>
        <%# deleteメソッドを使う %>


        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

</div>





<%= link_to 'Edit', edit_room_path(@room) %> |
<%= link_to 'Back', rooms_path %>


<script>

var open_dialog = function (str) {
  var element = document.getElementById('date-break');
  element.innerText = str
} 


</script>




